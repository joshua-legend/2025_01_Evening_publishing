# ERD 관계도 설계 철칙

**핵심 원칙 ⚡**  
데이터베이스 모델링 및 ERD 작성의 기본 방향과 관계 파악 기준

## 1. 기본 철칙

- 각 칸: 원자값 유지 🔬

  - **설명**: 한 칸에는 단일 값만 저장

- 원자값 미보장 시: 중간 테이블 도입 🔧

  - **설명**: 한 칸에 여러 값이 저장되어야 할 경우, 별도의 중간(조인) 테이블 활용

- N:M 관계 판단: 엔티티 관계 파악 방법 전제 🔎
  - **설명**: 다대다 관계 분석 시 반드시 아래의 **관계 파악 방법** 적용

## 2. 엔티티 관계 파악 방법

**관계 도출 방법 💡**  
서비스 관점에서 엔티티 간 상호작용을 분석하는 기준

- 엔티티 간 동사 도출

  - 예시: “A가 B를 ~” 또는 “B가 A에 의해 ~”
  - 서비스 흐름, 역할 구분 확인 (동사 도출)

- 수량 표현 결정

  - 예시:
    - “하나의 A는 (하나의/여러 개의) B를 ~”
    - “하나의 B는 (하나의/여러 개의) A에 의해 ~”
  - 관계 명확성, 혼동 방지 위한 기준 (수량 표현)

- 관계 유형 판단
  - 양측 모두 단일 관계: `1:1`
  - A: 여러 개의 B, B: 단일 A: `1:N`
  - A: 단일 B, B: 여러 개의 A: `N:1`
  - 양측 모두 다수 관계: `N:M`

## 3. 관계 유형에 따른 테이블 설계 특징

- 1:N 관계: 다수 쪽 FK 포함 🔗

  - **설명**: N 쪽 테이블에 외래 키 삽입
  - 부모-자식 관계 명확

- N:M 관계: 중간 테이블 도입 후 1:N 관계 분해 🔀

  - **설명**: 두 엔티티의 외래 키 포함한 중간 테이블 생성
  - 복잡한 관계 단순화

- 1:1 관계: 어느 한쪽에 FK 삽입 또는 통합 고려 🤝
  - **설명**: 밀접한 데이터의 경우 단일 테이블로 통합
  - 구조 단순, 관리 효율

## 4. 데이터 중복 제거 위한 테이블 분리

- 테이블 분리: 데이터 중복 제거 🗄
  - **설명**: 불필요한 중복 데이터 배제
  - 저장 효율, 무결성 강화

**일관성 유지**  
모든 관계 및 테이블 설계는 서비스 요구 사항과 비즈니스 로직에 기반하여 결정

---

### 예시 코드

```sql
-- 예: 간단한 중간 테이블 설계 예시
CREATE TABLE example (
    id INT PRIMARY KEY,
    name VARCHAR(100)
);

CREATE TABLE mapping_table (
    example_id INT,
    another_id INT,
    PRIMARY KEY (example_id, another_id)
);
```
